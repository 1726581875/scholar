<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>教学资源界面</title>
    <!-- 引入ajax的前缀路径，统一管理-->
    <script src="path.js"></script>
    <link href="http://res.scholat.com/scholat/course/styles/T_BackManager.gzcss?_dc=e6e9b591575" rel="stylesheet"
        type="text/css" />
    <link href="http://res.scholat.com/scholat/course/styles/T_BackToolbar.gzcss?_dc=58b86543e2b" rel="stylesheet"
        type="text/css" />
    <link href="http://res.scholat.com/scholat/portal/styles/portalTop.gzcss?_dc=c66acc21bf1" rel="stylesheet"
        type="text/css" />
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.0.1/css/bootstrap.min.css" rel="stylesheet">
    <!-- bootstrap -->
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>

<body>

    <div class="head" style="padding-bottom: 5px; text-align: center;">
        <div style="display: inline;">
            <div class="head-title">
                微服务
            </div>
            <div id="msgImg" class="head-notice">
                <div style="width: 135px; float: right; cursor: pointer">
                    欢迎您，叶汝铿老师&nbsp;&nbsp;
                </div>
            </div>
        </div>
        <div class="head-toolbar">
            <div id="lnews" class="head-toolbar-item head-toolbar-item-news"
                onClick="javascript:window.location.href='/course/T_latestNews.html?courseId=2954'">
                <div class="head-toolbar-item-detail">
                    最新动态
                    <div style="font-size: 12px;">
                        What's New
                    </div>
                </div>
            </div>
            <div id="nlist" class="head-toolbar-item head-toolbar-item-notice"
                onClick="javascript:window.location.href='/course/T_noticeList.html?courseId=2954'">
                <div class="head-toolbar-item-detail">
                    教学公告
                    <div style="font-size: 12px;">
                        Alerts
                    </div>
                </div>
            </div>
            <div id="tresou" class="head-toolbar-item head-toolbar-item-resource"
                onClick="javascript:window.location.href='/course/T_allResources.html?courseId=2954'">
                <div class="head-toolbar-item-detail w1">
                    教学资源
                    <div style="font-size: 12px;">
                        Resources
                    </div>
                </div>
            </div>
            <div id="taskl" class="head-toolbar-item head-toolbar-item-homework"
                onClick="javascript:window.location.href='/course/T_homeworkList.html?courseId=2954'">
                <div class="head-toolbar-item-detail w2" style="margin-left: -39px;">
                    作业管理
                    <div style="font-size: 12px;">
                        Homework
                    </div>
                </div>
            </div>
            <div id="ques" class="head-toolbar-item head-toolbar-item-question"
                onClick="javascript:window.location.href='/course/T_allQuestions.html?courseId=2954'">
                <div class="head-toolbar-item-detail">
                    互动交流
                    <div style="font-size: 12px;">
                        Interaction
                    </div>
                </div>
            </div>
            <div id="cinfo" class="head-toolbar-item head-toolbar-item-courseInfo"
                onClick="javascript:window.location.href='/course/T_editCourseInfo.html?courseId=2954'">
                <div class="head-toolbar-item-detail w3">
                    课程管理
                    <div style="font-size: 12px;">
                        Management
                    </div>
                </div>
            </div>
            <div id="cclass" class="head-toolbar-item head-toolbar-item-stuManage"
                onClick="javascript:window.location.href='/course/T_manageStudents.html?courseId=2954'">
                <div class="head-toolbar-item-detail w4" style="margin-left: -39px;">
                    学生管理
                    <div style="font-size: 12px;">
                        Students
                    </div>
                </div>
            </div>
        </div>
    </div>
    <hr />
    <!-- 添加课程按钮 -->
    <div style="text-align: center;">
        <a style="cursor: pointer" onclick="uploadResources()" class="btn btn-info btn-lg">
            <span class="glyphicon glyphicon-plus"></span> 添加资源
        </a><input type="file" onchange="uploadResources()"  style="display:none" id="uploadtask" name="homeWork" multiple/>
    </div>
    <br />
    <div class="container">
        <div class="row clearfix">
            <div class="col-md-4 column">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">
                            教学资源分类
                        </h3>
                    </div>
                    <div class="panel-body">
                        java文档
                    </div>
                    <div class="panel-footer">
                        课件
                    </div>
                </div>
            </div>
            <div class="col-md-6 column">
                <table class="table">
                    <tbody>
                        <tr>
                            <td>
                                1
                            </td>
                            <td>
                                TB - Monthly
                            </td>
                            <td>
                                01/04/2012
                            </td>
                            <td>
                                Default
                            </td>
                        </tr>

                        <tr class="error">
                            <td>
                                2
                            </td>
                            <td>
                                TB - Monthly
                            </td>
                            <td>
                                02/04/2012
                            </td>
                            <td>
                                Declined
                            </td>
                        </tr>

                    </tbody>
                </table>
            </div>

        </div>
    </div>

</body>
<script>
    var courseId;
    $(function () {
        courseId = getUrlParam("courseId");
    });

    //获取URL中的参数
    function getUrlParam(name) { //封装方法
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
        var r = window.location.search.substr(1).match(reg); //匹配目标参数
        if (r != null) return unescape(r[2]);
        return null; //返回参数值
    };

    function taskupdate() {
        $("#uploadtask").click();
    };

    function uploadResources() {
        var formData = new FormData();
        formData.append('homeWork', $("#uploadtask")[0].files[0]);
        //发送ajax上传资源文件
        $.ajax({
            url: urlPath.task() +'/uploadResources?courseId='+courseId,
            type: 'POST',
            //crossDomain: true, //允许跨域请求
            data: formData, //请求的数据
            contentType: false, // 当有文件要上传时，此项是必须的，否则后台无法识别文件流的起始位置
            processData: false, // 是否序列化data属性，默认true(注意：false时type必须是post)
            dataType: 'json', //这里是返回类型，一般是json,text等
            //clearForm: true,//提交后是否清空表单数据
            success: function (result) { //提交成功后自动执行的处理函数，参数data就是服务器返回的数据。
                if (result.status == 1) {
                    alert('上传成功');
                } else {
                    alert("上传失败！");
                }
            },

        });

    }
</script>
</html>